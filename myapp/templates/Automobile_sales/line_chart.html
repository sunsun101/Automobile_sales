{% extends 'Automobile_sales/base.html' %}
{% load staticfiles %}
{% block head %}
  <link rel="stylesheet"  href="{% static 'css/automobile.css' %}">
   <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
   
{% endblock %}
{% block body %}

<div class="row">
  <div class="col-md-6">
    <form name="scatterForm" method="post" action="/line_chart/">
      <select multiple name="test" id="vechilelist">
      {% for obj in vehicle_list%}
        <option value="{{obj.id}}">{{obj.model_no}}</option>
      {% endfor %}
      </select>
      <input type="submit" id="filter" name="filter" value="Filter">
  </form>
  </div>
  <div class="col-md-6">
    <p>{{value1}}</p>
    <p>{{value2}}</p>
  </div>



</div>

 <div id="chart_div" style="width: 900px; height: 500px;"></div>

  {% endblock %}
  
  {% block script %}
   <script type="text/javascript">
      value1 = $("#vechilelist option[value='"+{{value1}}+"']").text();
      value2 = $("#vechilelist option[value='"+{{value2}}+"']").text();

      google.charts.load('current', {'packages':['corechart','line']});
      google.charts.setOnLoadCallback(drawSeriesChart);

    function drawSeriesChart() {
      var data = new google.visualization.DataTable();
      
      data.addColumn('string', 'Month');
      data.addColumn('number', value1);
      data.addColumn('number', value2);


      data.addRows([
        
        ['January',{{vehicle1_likes.1}},{{vehicle2_likes.1}}],
        ['February',{{vehicle1_likes.2}},{{vehicle2_likes.2}}],
        ['March',{{vehicle1_likes.3}},{{vehicle2_likes.3}}],
        ['April',{{vehicle1_likes.4}},{{vehicle2_likes.4}}],
        ['May',{{vehicle1_likes.5}},{{vehicle2_likes.5}}],
        ['June',{{vehicle1_likes.6}},{{vehicle2_likes.6}}],
        ['July',{{vehicle1_likes.7}},{{vehicle2_likes.7}}],
        ['August',{{vehicle1_likes.8}},{{vehicle2_likes.8}}],
        ['September',{{vehicle1_likes.9}},{{vehicle2_likes.9}}],
        ['October',{{vehicle1_likes.10}},{{vehicle2_likes.10}}],
        ['November',{{vehicle1_likes.11}},{{vehicle2_likes.11}}],
        ['December',{{vehicle1_likes.12}},{{vehicle2_likes.12}}],
        
        
        
      
        
      ]);

      var options = {
        hAxis: {
          title: 'Vehicles'
        },
        vAxis: {
          title: 'Like Rate (scale of 1-100%)'
        },
        // backgroundColor: '#f1f8e9'
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
      // var materialChart = new google.charts.Line(document.getElementById('chart_div'));
      //   materialChart.draw(data, options);
    }

    // Executed when DOM is loaded
$(document).ready(function() {
   // Executed when select is changed
    $("select").on('change',function() {
        var y = this.val;
        var x = $("#vechilelist :selected").length;

        if (x > 1 && y != '' ) {
           $("#filter").show();
        } else {
           $("#filter").hide();
        }
    });

    // It must not be visible at first time
    $("#filter").css("display","none");
}); 
    </script>
    
  {% endblock %}